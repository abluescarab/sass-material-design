/// ============================================================================
/// @file           components/_icon-button.scss
/// @description    Material Design icon button component.
/// @data           type: button style
///                     options: filled, tonal, outlined
/// @modifiers      selected: fill and change background color
///                 small: half size button
/// ============================================================================

@use "../abstracts" as *;
@use "../themes";

.md-icon-button {
    $parent: &;

    @include square($icon-button__width);

    display: flex;
    align-items: center;
    justify-content: center;
    flex: none;
    border: 0;
    border-radius: sys("shape", "corner", "full");
    font-family: "Material Symbols Outlined", sans-serif;
    font-size: $icon__font-size;
    user-select: none;
    background-color: transparent;

    @include themes.themify {
        @include enabled-styling(
            (
                background-color: transparent,
            )
        ) {
            @include mix-states(
                transparent,
                themes.color("on-surface-variant"),
                true,
                true
            );
        }
    }

    &--selected {
        font-variation-settings: "FILL" 1;

        @include themes.themify {
            @include enabled-styling(
                (
                    background-color: transparent,
                )
            ) {
                @include mix-states(
                    transparent,
                    themes.color("primary"),
                    true,
                    true
                );
            }
        }
    }

    // not in MD3 specs
    &--small {
        @include square($icon-button--small__width);

        font-size: 16px;
    }

    @include themes.themify {
        &[data-md-type="filled"] {
            @include enabled-styling {
                @include mix-states(
                    themes.color("surface-container-highest"),
                    themes.color("primary"),
                    true,
                    true
                );
            }

            &#{$parent}--selected {
                @include enabled-styling {
                    @include mix-states(
                        themes.color("primary"),
                        themes.color("on-primary"),
                        true,
                        true
                    );
                }
            }
        }

        &[data-md-type="tonal"] {
            @include enabled-styling {
                @include mix-states(
                    themes.color("surface-container-highest"),
                    themes.color("on-surface-variant"),
                    true,
                    true
                );
            }

            &#{$parent}--selected {
                @include enabled-styling {
                    @include mix-states(
                        themes.color("secondary-container"),
                        themes.color("on-secondary-container"),
                        true,
                        true
                    );
                }
            }
        }

        &[data-md-type="outlined"] {
            @include enabled-styling(
                (
                    background-color: transparent,
                    border: 1px solid
                        rgba(
                            themes.color("on-surface"),
                            sys("state", "disabled", "outline-opacity")
                        ),
                )
            ) {
                @include mix-states(
                    transparent,
                    themes.color("on-surface-variant"),
                    true,
                    true
                );

                border: 1px solid themes.color("outline");
            }

            &#{$parent}--selected {
                border: 0;

                @include enabled-styling {
                    @include mix-states(
                        themes.color("inverse-surface"),
                        themes.color("inverse-on-surface"),
                        true,
                        true
                    );
                }
            }
        }
    }
}
